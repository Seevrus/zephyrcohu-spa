<div class="register-component" data-testid="register-component">
  <h1>Regisztráció</h1>
  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div class="form-elements-container">
      <mat-form-field data-testid="email">
        <mat-label>Email cím</mat-label>
        <input matInput formControlName="email">
        @if (email?.hasError('required')) {
          <mat-error>Kötelező mező</mat-error>
        } @else if (email?.hasError('email')) {
          <mat-error>Email cím formátuma nem megfelelő</mat-error>
        }
      </mat-form-field>
      <div formGroupName="passwords" class="password-container">
        <mat-form-field data-testid="password">
          <mat-label>Jelszó</mat-label>
          <input
            matInput
            [type]="isPasswordVisible ? 'text' : 'password'"
            formControlName="password">
          @if (password?.hasError('required')) {
            <mat-error>Kötelező mező</mat-error>
          } @else if (password?.hasError('pattern')) {
            <mat-error>Jelszó formátuma nem megfelelő</mat-error>
          }
        </mat-form-field>
        <mat-form-field data-testid="password">
          <mat-label>Jelszó újra:</mat-label>
          <input
            matInput
            [type]="isPasswordVisible ? 'text' : 'password'"
            formControlName="passwordAgain">
          @if (passwords?.hasError('passwordsDontMatch')) {
            <mat-error>A beírt jelszavak nem egyeznek meg</mat-error>
          }
        </mat-form-field>
        <div>
          <p>
            A jelszó minimális hossza 8 karakter.
            Engedélyezett karakterek: magyar ABC kis- és nagybetűi, számok,
            illetve az alábbi speciális karakterek: . _ + # % &#64; -
          </p>
          @if (passwordStrength) {
            <p>A jelszó erőssége:
              <span [ngClass]="['strength', getPasswordStrengthClass(passwordStrength)]">
                {{ passwordStrength }}
              </span>
            </p>
          }
          <p>
            Erős jelszavak generálása pofonegyszerűen -
            <a
              href="https://hvg.hu/tudomany/20171117_eros_jelszo_letrehozasa_generator_nehezen_kitalalhato_jelszavak_nehezen_feltorheto_jelszo_biztonsagos_milyen_jelszot_valasszak"
            >
              segédlet az alábbi oldalon
            </a>.
          </p>
        </div>
        <button mat-button data-testid="toggle-password" type="button" (click)="togglePassword()">
          {{ isPasswordVisible ? 'Jelszó elrejtése' : 'Jelszó megjelenítése' }}
        </button>
      </div>
      <button
        mat-flat-button
        data-testid="submit-button"
        type="submit"
        [disabled]="!registerForm.valid || !registerForm.dirty"
      >
        Regisztráció
      </button>
    </div>
  </form>
  <p class="forgot-password">Amennyiben elfelejtette a jelszavát, ide kattintva tud új jelszót létrehozni!</p>
</div>
