<div data-testid="main-component">
  <h1>Bejelentkezés</h1>
  <div>
    <p>A bejelentkezéshez kérem adja meg regisztrált email címét és a hozzá tartozó jelszavát:</p>
  </div>
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
    <div>
      <mat-form-field>
        <mat-label>Email cím</mat-label>
        <input matInput formControlName="email">
        @if (email?.hasError('required')) {
          <mat-error>Kötelező mező</mat-error>
        } @else if (email?.hasError('email')) {
          <mat-error>Email cím formátuma nem megfelelő</mat-error>
        }
      </mat-form-field>
      <div>
        <mat-form-field>
          <mat-label>Jelszó</mat-label>
          <input
            matInput
            [type]="isPasswordVisible ? 'text' : 'password'"
            formControlName="password">
          @if (password?.hasError('required')) {
            <mat-error>Kötelező mező</mat-error>
          } @else if (password?.hasError('pattern')) {
            <mat-error>Jelszó formátuma nem megfelelő</mat-error>
          }
        </mat-form-field>
        <button mat-button type="button" (click)="togglePassword()">
          {{ isPasswordVisible ? 'Jelszó elrejtése' : 'Jelszó megjelenítése' }}
        </button>
      </div>
      <button
        mat-flat-button
        type="submit"
        [disabled]="!loginForm.valid || !loginForm.dirty"
      >
        Belépés
      </button>
    </div>
  </form>
  <div>Amennyiben elfelejtette a jelszavát, ide kattintva tud új jelszót létrehozni!</div>
</div>
